The Triangle of Harm by Vitalik Buterin

위의 도표는 캐스퍼\(Casper\)의 경제적 유인설계의 핵심원리를 가장 잘 나타낸 도표이다.

소수,다수,프로토콜이있으며각화살표는가능한공격가능성을나타냄

1. 소수가 프로토콜을 공격하는 시나리오
2. 소수가 다수를 공격하는 시나리오
3. 다수가 프로토콜을 공격하는 시나리오
4. 다수가 소수를 공격하는 시나리오

캐스퍼의핵심철학은위의네가지공격시나리오에서공격비용대비피해손실규모의비율의최대값을제한하는것

작업증명\(PoW\)은 위의 공격시나리오 중 C와 D에 대한 방어책이 없음.

A와B의경우공격자가채굴한블록이블록체인에추가되지않아매출감소의기회비용이존재.하지만공격자가다수인경우공격자는자신의체인이확실하게메인체인이될수있으므로공격비용이들지않음.장기적으로난이도조절에의하여채굴자들이받는총보상은정해져있으므로피해자\(victim\)가손실을입는다면이는공격자가추가적인수익을내는것을의미.

작업증명의 위와 같은 특성은 나카모토 작업증명이 dissent를 벌주기 때문

채굴자가합의된블록체인상에서채굴하면보상을받지만합의에부합하지않는블록을채굴하게되면벌을받음.벌은프로토콜이주는것이아니라채굴자가전기와채굴기를사용하여채굴을하지만보상을받지못하기때문에일종의기회비용으로손실을입는다.

반면캐스퍼는equivocation을벌줌

서로상충되는메세지를전송한경우\(이중하나의메세지가합의와부합하더라도\)큰손실을입게됨.따라서완결성\(finality\)을reversion하는경우이러한reversion을일으킨노드는손실을입게되며다른참가자들은어떠한영향도받지않는다.다수는큰비용을지불해야만프로토콜을공격할수있고다수는소수의손실을초래할수없다.

Liveness faults와censorship공격까지감안하면상황이더복잡해짐

Liveness fault는캐스퍼검증자의상당수가오프라인이되는경우완결성합의에다다를수없는상황을말함. Censorship fault란캐스퍼검증자의다수가특정거래를받아들이지않거나다른검증자의합의메세지를받아들이지않음으로서그들이보상받지못하게하는경우를말함.

이는보다근본적인전달자/수용자간fault equivalence와관련이있음

만약B가A의메세지를받지못했다고주장한다면다음의두가지가능성이있다. \(i\) A가메세지를보내지않거나\(ii\) B가메세지를듣지못한척하거나.따라서B의주장만을가지고어떤주장이올바른것인지알수없다.따라서예를들어70%의검증자의메세지만이블록체인에추가되고나머지30%의검증자의메세지가추가되지않는다면30%의검증자들이오프라인상태인지아니면70%의검증자들이그들의메세지를검열하고있는것인지알길이없다.

양쪽을모두벌주게되면반대쪽에대한“grief”를할수있음.

소수의경우오프라인으로전환하거나다수의경우검열을시행함으로써반대편에대한“grief”를실시할수있음.하지만“griefing factor analysis”를통해이러한“griefing”이얼마나쉬운지에대한제한을설정할수있음.특정전략의grieving factor는피해자의손실을공격비용으로나눈값임.특정프로토콜의grieving factor는해당프로토콜이허용하는최대의grieving factor값임.예를들어특정프로토콜하에서내가1달러의비용으로상대편에게3달러의손실을끼칠수있다면grieving factor는3이된다.어떠한비용을지불하더라도상대편에게손실을끼칠수없다면grieving factor는0,반대로비용없이상대방에게손실을끼칠수있는경우grieving factor는무한대이다.

일반적으로전달자/수용자간fault equivalence가존재하는경우grieving factor의global bound를1미만으로낮추는것은불가능

이유는간단함.양쪽모두상대편에대해grief를할수있으므로만약A가B에대한grieving factor가X이고반대로B가A에대한grieving factor가1/X인경우에X와1/X가동시에1미만일수없음. factor들을조정하는것이가능함.예를들어소수에의한공격이더빈번할것이라생각되면다수공격자의grieving factor를2로하고소수공격자의grieving factor가0.5가되게할수있다.또한소규모공격에대해서는grieving factor를1로설정하고대규모공격에대해서는체인분리를실시해각각의체인이상대방의체인을penalize할수있도록할수있다.이경우시장에의해공격자가선호되어지지않는체인이선택될수있다.따라서이러한프레임워크안에서다양한종류의타협과선택의여지가존재.

양쪽모두를penalize하는것은또다른혜택이존재

프로토콜이공격을받는경우,공격자는손실을입게됨.이를통해공격자가누구든지간에프로토콜에가해지는손실의크기에비례한만큼공격하지않을유인을가지게된다.하지만공격비용대비프로토콜에가해지는손실의비율을제한하기위해서는프로토콜에가해지는손실의크기를측정할수있는정식적인방식이필요하다.

이는protocol utility function의개념을소개

protocol utility function은프로토콜이얼마나잘작동하고있는지를나타내는공식으로이상적으로는블록체인내부에서계산이되어질수있어야함.작업증명체인의경우이는채굴된모든블록중메인체인에포함된블록의비율.캐스퍼의경우,모든epoch이finalized되는경우protocol utility는0이며어떠한보안상의실패도일어나지않음. finalized되지않은epoch에대해서는약간의penalty가있으며보안상의실패에대해서는매우큰penalty가부과됨.만약protocol utility function이formalize될수있다면,실패에대한패널티는그러한실패로인해발생하는protocol utility의감소분에가깝게설정될수있다.

